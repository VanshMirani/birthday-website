:root{
  --bg1: #ee2c80;
  --bg2: #fff3fc;
  --accent1: #ff6fa3;
  --accent2: #ffb3d9;
  --accent3: #7ee7c4;
  --accent4: #ffd87a;
  --muted: #6b6b6b;
  --card: #ffffff;
  --shadow-soft: 0 10px 30px rgba(0,0,0,0.08);
  --shadow-strong: 0 20px 60px rgba(0,0,0,0.12);
  --radius: 18px;
  --font: 'Poppins', sans-serif;
}

/* RESET */
*{ box-sizing:border-box; margin:0; padding:0; }
html,body,#app{ height:100%; }
body{
  font-family:var(--font);
  background:
    radial-gradient(800px 280px at 8% 12%, rgba(255,111,153,0.08), transparent 10%),
    radial-gradient(700px 220px at 92% 84%, rgba(126,231,196,0.06), transparent 8%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  overflow-x:hidden;
  color:#222;
}

/* PAGES */
.page{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
  min-height:100vh;
}
.hidden{ display:none; }

/* CARD */
.center-card{
  background:rgba(255,255,255,0.92);
  padding:26px;
  border-radius:var(--radius);
  width:100%;
  max-width:900px;
  text-align:center;
  box-shadow:var(--shadow-strong);
  position:relative;
  overflow:hidden;
}

/* Beautiful floating background glow */
.center-card::before,
.center-card::after{
  content:"";
  position:absolute;
  filter:blur(18px);
  opacity:0.85;
  z-index:-1;
}
.center-card::before{
  width:220px; height:220px;
  top:-80px; right:-80px;
  background:radial-gradient(circle, rgba(255,111,163,0.18), transparent);
  animation: floaty 6s ease-in-out infinite;
}
.center-card::after{
  width:180px; height:180px;
  bottom:-80px; left:-70px;
  background:radial-gradient(circle, rgba(126,231,196,0.18), transparent);
  animation: floaty2 7s ease-in-out infinite;
}

@keyframes floaty{
  0%{ transform:translateY(0); }
  50%{ transform:translateY(-14px); }
  100%{ transform:translateY(0); }
}
@keyframes floaty2{
  0%{ transform:translateY(0); }
  50%{ transform:translateY(10px); }
  100%{ transform:translateY(0); }
}

/* TITLE */
.title{
  font-size:2.1rem;
  margin-bottom:8px;
  font-weight:800;
}
.subtitle{
  color:var(--muted);
  font-weight:600;
  margin-bottom:14px;
}

/* BUTTONS */
.btn{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#fff;
  border:none;
  padding:12px 20px;
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 14px 22px rgba(255,111,163,0.2);
  transition: all 0.2s ease;
}
.btn:hover{ transform:translateY(-4px) scale(1.03); }
.btn:active{ transform:translateY(2px) scale(.96); }
.btn.big{ padding:16px 28px; font-size:1.05rem; }
.btn.small{ padding:8px 12px; }

/* COUNTDOWN */
.countdown{
  display:flex;
  gap:16px;
  justify-content:center;
  margin-top:20px;
}
.countdown div{
  background:#fff;
  padding:14px;
  width:82px;
  border-radius:14px;
  box-shadow:var(--shadow-soft);
}
.countdown span{
  font-size:1.6rem;
  font-weight:900;
}

/* Smooth number change */
.smooth-count span{
  transition: all .25s ease;
}

/* 3–2–1 Transition */
.big-count{
  font-size:92px;
  font-weight:900;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  color:transparent;
  transition: all 0.45s ease-out;
}

/* Fade scale for countdown */
.fade-scale{
  animation:fadeScale 0.9s ease-out;
}
@keyframes fadeScale{
  from{ opacity:0; transform:scale(0.7); }
  to{ opacity:1; transform:scale(1); }
}

/* ==== 3D CAKE STYLE ==== */
.cake-3d-wrap{
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:20px;
}
.cake-3d-svg{
  max-width:360px;
  filter: drop-shadow(0 16px 30px rgba(0,0,0,0.15));
}

/* Candles */
.flame-core{
  animation:flicker 1.2s infinite ease-in-out;
  transform-origin:center;
}
@keyframes flicker{
  0%{ transform:translateY(0) scale(1); opacity:1; }
  50%{ transform:translateY(-3px) scale(1.08); opacity:0.92; }
  100%{ transform:translateY(0) scale(1); opacity:1; }
}

/* Extinguish */
.candle-extinguished .flame-core{
  opacity:0;
  transform:translateY(-20px) scale(0.2);
  transition:all 0.6s ease-out;
}

/* NOTES */
.notes-area{
  margin-top:20px;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  justify-content:center;
}
.note{
  width:190px;
  height:150px;
  padding:12px;
  border-radius:14px;
  background:linear-gradient(180deg,#fff,#fff8fd);
  box-shadow:var(--shadow-soft);
}
.note h4{ font-size:1rem; font-weight:700; }
.note p{ margin-top:6px; font-size:0.9rem; }

/* ==== FLASHBACK PAGE ==== */
.mem-wrap{
  position:relative;
  width:100%;
  max-width:760px;
  height:560px;   /* Increased spacing so images do not overlap */
  margin:24px auto;
}
.mem-img{
  position:absolute;
  width:110px;
  height:110px;
  border-radius:50%;
  object-fit:cover;
  border:6px solid white;
  box-shadow:var(--shadow-soft);
  cursor:grab;
  transition:all .25s ease;
}
.mem-img:active{ cursor:grabbing; transform:scale(1.05); }

.video-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:360px;
  padding:8px;
  border-radius:16px;
  background:#fff;
  box-shadow:var(--shadow-strong);
}
.video-center video{
  width:100%;
  border-radius:12px;
}

/* Circular placement */
.m1{ top:2%; left:50%; transform:translateX(-50%); }
.m2{ top:16%; left:82%; transform:translate(-50%,-50%); }
.m3{ top:46%; left:92%; transform:translate(-50%,-50%); }
.m4{ top:78%; left:82%; transform:translate(-50%,-50%); }
.m5{ top:90%; left:50%; transform:translate(-50%,-50%); }
.m6{ top:78%; left:18%; transform:translate(-50%,-50%); }
.m7{ top:46%; left:8%; transform:translate(-50%,-50%); }
.m8{ top:16%; left:18%; transform:translate(-50%,-50%); }

/* FINAL CARD */
/* final card message: preserve new lines and improve typography */
.card-message {
  background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.99));
  padding: 16px;
  margin: 10px auto 0;
  border-radius: 12px;
  box-shadow: 0 10px 28px rgba(0,0,0,0.06);
  color: #2b2b2b;
  max-width: 86%;
  text-align: left;
  font-size: 1rem;
  line-height: 1.48;
  white-space: pre-wrap;       /* preserve user newlines */
  word-break: break-word;      /* keep long lines from overflowing */
  font-feature-settings: "liga" 1;
  -webkit-font-smoothing: antialiased;
  margin-bottom: 8px;
}

/* make emojis slightly larger and aligned with text */
.card-message .final-message {
  font-size: 1rem;
  line-height: 1.5;
}

/* responsive tweak for small screens */
@media (max-width:640px){
  .card-message { font-size: 0.95rem; max-width:92%; padding:12px; }
  .card-wrapper { min-height:360px; }
}

/* confetti inside (tiny pulsing dots) */
.card-confetti{
  position:absolute;
  width:100%;
  height:100%;
  left:0; top:0;
  z-index:5;
  pointer-events:none;
}
.card-confetti span{
  display:block;
  position:absolute;
  width:10px; height:10px;
  border-radius:50%;
  opacity:0.95;
  filter: blur(.6px);
}
.card-confetti .c1{ background:#ffb3d9; left:18%; top:28%; animation: conf1 2.6s infinite; }
.card-confetti .c2{ background:#ffd87a; left:64%; top:36%; animation: conf2 3s infinite; }
.card-confetti .c3{ background:#7ee7c4; left:38%; top:58%; animation: conf3 2.4s infinite; }
.card-confetti .c4{ background:#ff6fa3; left:72%; top:64%; animation: conf4 2.9s infinite; }
.card-confetti .c5{ background:#ffc3ea; left:50%; top:14%; animation: conf5 3.2s infinite; }

@keyframes conf1{ 0% { transform:translateY(-6px) scale(0.9); } 50% { transform:translateY(8px) scale(1.05); } 100% { transform:translateY(-6px) scale(0.95); } }
@keyframes conf2{ 0% { transform:translateY(0) scale(1); } 50% { transform:translateY(-10px) scale(1.04); } 100% { transform:translateY(0) scale(1); } }
@keyframes conf3{ 0% { transform:translateY(-2px) scale(0.95); } 50% { transform:translateY(6px) scale(1.06); } 100% { transform:translateY(-2px) scale(0.95); } }
@keyframes conf4{ 0% { transform:translateY(-8px) scale(0.9); } 50% { transform:translateY(8px) scale(1.08); } 100% { transform:translateY(-8px) scale(0.9); } }
@keyframes conf5{ 0% { transform:translateY(-4px) scale(0.92); } 50% { transform:translateY(10px) scale(1.06); } 100% { transform:translateY(-4px) scale(0.92); } }

/* small screen adjustments */
@media (max-width:720px){
  .card-wrapper{ min-height:380px; }
  .greeting-card{ width:86%; height:auto; padding:16px; }
  .card-message{ max-width:92%; font-size:0.98rem; }
  .envelope{ height:300px; }
}


/* CONFETTI LAYER */
.confetti-canvas{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  z-index:2000;
}

/* GENERAL PAGE FADE TRANSITION */
.fade-in-page{
  animation:fadeInPage .65s ease-out;
}
@keyframes fadeInPage{
  0%{ opacity:0; transform:translateY(20px) scale(.97); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

/* small responsive tweaks */
@media(max-width:600px){
  .cake-3d-svg{ max-width:280px; }
  .mem-wrap{ height:480px; }
  .video-center{ width:260px; }
  .mem-img{ width:85px; height:85px; }
}
