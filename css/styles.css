:root{
  --bg1: #ee2c80;
  --bg2: #fff3fc;
  --accent1: #ff6fa3;
  --accent2: #ffb3d9;
  --accent3: #7ee7c4;
  --accent4: #ffd87a;
  --muted: #6b6b6b;
  --card: #ffffff;
  --shadow-soft: 0 10px 30px rgba(0,0,0,0.08);
  --shadow-strong: 0 20px 60px rgba(0,0,0,0.12);
  --radius: 18px;
  --font: 'Poppins', sans-serif;
}

/* RESET */
*{ box-sizing:border-box; margin:0; padding:0; }
html,body,#app{ height:100%; }
body{
  font-family:var(--font);
  background:
    radial-gradient(800px 280px at 8% 12%, rgba(255,111,153,0.08), transparent 10%),
    radial-gradient(700px 220px at 92% 84%, rgba(126,231,196,0.06), transparent 8%),
    linear-gradient(180deg,var(--bg1),var(--bg2));
  overflow-x:hidden;
  color:#222;
}

/* PAGES */
.page{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
  min-height:100vh;
}
.hidden{ display:none; }

/* CARD */
.center-card{
  background:rgba(255,255,255,0.92);
  padding:26px;
  border-radius:var(--radius);
  width:100%;
  max-width:900px;
  text-align:center;
  box-shadow:var(--shadow-strong);
  position:relative;
  overflow:hidden;
}

/* Beautiful floating background glow */
.center-card::before,
.center-card::after{
  content:"";
  position:absolute;
  filter:blur(18px);
  opacity:0.85;
  z-index:-1;
}
.center-card::before{
  width:220px; height:220px;
  top:-80px; right:-80px;
  background:radial-gradient(circle, rgba(255,111,163,0.18), transparent);
  animation: floaty 6s ease-in-out infinite;
}
.center-card::after{
  width:180px; height:180px;
  bottom:-80px; left:-70px;
  background:radial-gradient(circle, rgba(126,231,196,0.18), transparent);
  animation: floaty2 7s ease-in-out infinite;
}

@keyframes floaty{
  0%{ transform:translateY(0); }
  50%{ transform:translateY(-14px); }
  100%{ transform:translateY(0); }
}
@keyframes floaty2{
  0%{ transform:translateY(0); }
  50%{ transform:translateY(10px); }
  100%{ transform:translateY(0); }
}

/* TITLE */
.title{
  font-size:2.1rem;
  margin-bottom:8px;
  font-weight:800;
}
.subtitle{
  color:var(--muted);
  font-weight:600;
  margin-bottom:14px;
}

/* BUTTONS */
.btn{
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  color:#fff;
  border:none;
  padding:12px 20px;
  border-radius:14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 14px 22px rgba(255,111,163,0.2);
  transition: all 0.2s ease;
}
.btn:hover{ transform:translateY(-4px) scale(1.03); }
.btn:active{ transform:translateY(2px) scale(.96); }
.btn.big{ padding:16px 28px; font-size:1.05rem; }
.btn.small{ padding:8px 12px; }

/* COUNTDOWN */
.countdown{
  display:flex;
  gap:16px;
  justify-content:center;
  margin-top:20px;
}
.countdown div{
  background:#fff;
  padding:14px;
  width:82px;
  border-radius:14px;
  box-shadow:var(--shadow-soft);
}
.countdown span{
  font-size:1.6rem;
  font-weight:900;
}

/* Smooth number change */
.smooth-count span{
  transition: all .25s ease;
}

/* 3–2–1 Transition */
.big-count{
  font-size:92px;
  font-weight:900;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));
  -webkit-background-clip:text;
  color:transparent;
  transition: all 0.45s ease-out;
}

/* Fade scale for countdown */
.fade-scale{
  animation:fadeScale 0.9s ease-out;
}
@keyframes fadeScale{
  from{ opacity:0; transform:scale(0.7); }
  to{ opacity:1; transform:scale(1); }
}

/* ==== 3D CAKE STYLE ==== */
.cake-3d-wrap{
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:20px;
}
.cake-3d-svg{
  max-width:360px;
  filter: drop-shadow(0 16px 30px rgba(0,0,0,0.15));
}

/* Candles */
.flame-core{
  animation:flicker 1.2s infinite ease-in-out;
  transform-origin:center;
}
@keyframes flicker{
  0%{ transform:translateY(0) scale(1); opacity:1; }
  50%{ transform:translateY(-3px) scale(1.08); opacity:0.92; }
  100%{ transform:translateY(0) scale(1); opacity:1; }
}

/* Extinguish */
.candle-extinguished .flame-core{
  opacity:0;
  transform:translateY(-20px) scale(0.2);
  transition:all 0.6s ease-out;
}

/* NOTES */
.notes-area{
  margin-top:20px;
  padding:10px;
  display:flex;
  flex-wrap:wrap;
  gap:14px;
  justify-content:center;
}
.note{
  width:190px;
  height:150px;
  padding:12px;
  border-radius:14px;
  background:linear-gradient(180deg,#fff,#fff8fd);
  box-shadow:var(--shadow-soft);
}
.note h4{ font-size:1rem; font-weight:700; }
.note p{ margin-top:6px; font-size:0.9rem; }

/* ==== FLASHBACK PAGE ==== */
.mem-wrap{
  position:relative;
  width:100%;
  max-width:760px;
  height:560px;   /* Increased spacing so images do not overlap */
  margin:24px auto;
}
.mem-img{
  position:absolute;
  width:110px;
  height:110px;
  border-radius:50%;
  object-fit:cover;
  border:6px solid white;
  box-shadow:var(--shadow-soft);
  cursor:grab;
  transition:all .25s ease;
}
.mem-img:active{ cursor:grabbing; transform:scale(1.05); }

.video-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:360px;
  padding:8px;
  border-radius:16px;
  background:#fff;
  box-shadow:var(--shadow-strong);
}
.video-center video{
  width:100%;
  border-radius:12px;
}

/* Circular placement */
.m1{ top:2%; left:50%; transform:translateX(-50%); }
.m2{ top:16%; left:82%; transform:translate(-50%,-50%); }
.m3{ top:46%; left:92%; transform:translate(-50%,-50%); }
.m4{ top:78%; left:82%; transform:translate(-50%,-50%); }
.m5{ top:90%; left:50%; transform:translate(-50%,-50%); }
.m6{ top:78%; left:18%; transform:translate(-50%,-50%); }
.m7{ top:46%; left:8%; transform:translate(-50%,-50%); }
.m8{ top:16%; left:18%; transform:translate(-50%,-50%); }

/* FINAL CARD */
/* --- Fixed page-turn CSS: center pivot + stable flip --- */

/* container: 3D preserve */
.greeting-card {
  width: 82%;
  max-width: 640px;
  height: 360px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform-style: preserve-3d;
  transition: transform 700ms cubic-bezier(.2,.9,.2,1);
  transform-origin: center center;    /* CENTER pivot now */
  z-index: 1500;                       /* large to stay above envelope */
  cursor: pointer;
  perspective: 1600px;
  display: block;
}

/* common face styles */
.card-face {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  border-radius: 18px;
  backface-visibility: hidden; /* ensure backface hidden */
  -webkit-backface-visibility: hidden;
  overflow: hidden;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:18px;
  box-sizing:border-box;
}

/* front face (cover) */
.card-front {
  background: linear-gradient(180deg,#fff,#fff4fb);
  box-shadow: 0 24px 60px rgba(0,0,0,0.18);
  transform: rotateY(0deg) translateZ(2px);
  z-index: 2;
}

/* back face (inner) - positioned flipped so it's hidden initially */
.card-back {
  background: linear-gradient(180deg,#fffdf8,#fffaf7);
  transform: rotateY(180deg) translateZ(0);
  z-index: 1;
}

/* TURNED: rotate the whole card around center by 180deg */
.greeting-card.turned {
  transform: translate(-50%,-50%) rotateY(180deg) scale(1.01);
}

/* when turned, front becomes backside (keep it low opacity so back is visible) */
.greeting-card.turned .card-front {
  opacity: 0.03;
  transform: rotateY(180deg) translateZ(0);
  transition: opacity 350ms ease;
}

/* when turned, back rotates into place (face now readable) */
.greeting-card.turned .card-back {
  transform: rotateY(0deg) translateZ(2px);
  transition: transform 700ms cubic-bezier(.2,.9,.2,1);
  z-index: 3;
}

/* ensure card message area inside back remains scrollable and visible */
.card-back .card-message {
  height: calc(100% - 110px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* keep preview/info on front visible and centered */
.card-front .card-preview { margin-top: 18px; }
.preview-line { color:#333; font-weight:700; }

/* flip hint */
.turn-hint { z-index: 1600; }

/* responsive adjustments (keep sizes same as before) */
@media (max-width:720px) {
  .greeting-card { width: 90%; height: 340px; }
  .card-back .card-message { height: calc(100% - 120px); }
}

/* CONFETTI LAYER */
.confetti-canvas{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  z-index:2000;
}

/* GENERAL PAGE FADE TRANSITION */
.fade-in-page{
  animation:fadeInPage .65s ease-out;
}
@keyframes fadeInPage{
  0%{ opacity:0; transform:translateY(20px) scale(.97); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

/* small responsive tweaks */
@media(max-width:600px){
  .cake-3d-svg{ max-width:280px; }
  .mem-wrap{ height:480px; }
  .video-center{ width:260px; }
  .mem-img{ width:85px; height:85px; }
}
